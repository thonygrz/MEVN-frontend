(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["categories"],{"58c2":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.categorias,search:e.search},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v("Categorías")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-text-field",{attrs:{"prepend-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":"",justify:"center"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",n,!1),r),[e._v(" Nuevo Item ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{label:"Nombre",counter:50,rules:[e.rules.required,e.rules.min]},model:{value:e.nombre,callback:function(t){e.nombre=t},expression:"nombre"}})],1),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-text-field",{attrs:{label:"Descripción"},model:{value:e.descripcion,callback:function(t){e.descripcion=t},expression:"descripcion"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" Cancelar ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v(" Guardar ")])],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[a("v-card",[e.actionType?a("v-card-title",{staticClass:"headline"},[e._v("¿Estás seguro de activar este item?")]):a("v-card-title",{staticClass:"headline"},[e._v("¿Estás seguro de desactivar este item?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancelar")]),e.actionType?a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.activateItemConfirm}},[e._v("Activar")]):a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deactivateItemConfirm}},[e._v("Desactivar")]),a("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var r=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(r)}}},[e._v(" mdi-pencil ")]),1===r.status?a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deactivateItem(r)}}},[e._v(" mdi-cancel ")]):a("v-icon",{attrs:{small:""},on:{click:function(t){return e.activateItem(r)}}},[e._v(" mdi-check ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.getCategorias}},[e._v(" Reset ")])]},proxy:!0},{key:"item.status",fn:function(t){var r=t.item;return[a("v-chip",{attrs:{color:e.getColor(r.status),dark:""}},[e._v(" "+e._s(e.statusName(r.status))+" ")])]}}])})],1)},n=[],i=(a("a4d3"),a("e01a"),a("b0c0"),a("96cf"),a("1da1")),c=a("bc3a"),o=a.n(c),s={name:"Categories",data:function(){return{search:"",dialog:!1,dialogDelete:!1,headers:[{text:"Acciones",value:"actions",sortable:!1},{text:"Nombre",value:"name"},{text:"Descripcion",value:"description"},{text:"Estado",value:"status",align:"center"}],editedIndex:-1,defaultItem:{name:"",description:"",status:0},categorias:[],_id:"",nombre:"",descripcion:"",rules:{required:function(e){return!!e||"Campo requerido"},min:function(e){return e&&e.length>=1&&e.length<=53||"El nombre debe estar entre 1 y 50 caracteres"}},valid:!1,item:null,actionType:null}},computed:{formTitle:function(){return-1===this.editedIndex?"Nueva categoría":"Editar categoría"}},watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},created:function(){this.getCategorias()},methods:{getCategorias:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={Token:e.$store.state.token},r={headers:a},t.next=5,o.a.get("category/list",r);case 5:n=t.sent,e.categorias=n.data,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},statusName:function(e){return 1===e?"Activo":0===e?"Desactivado":"Estado desconocido"},editItem:function(e){this._id=e._id,this.nombre=e.name,this.descripcion=e.description,this.editedIndex=1,this.dialog=!0},deactivateItem:function(e){this._id=e._id,this.actionType=0,this.dialogDelete=!0},activateItem:function(e){this._id=e._id,this.actionType=1,this.dialogDelete=!0},deactivateItemConfirm:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={Token:e.$store.state.token},r={headers:a},t.next=5,o.a.put("/category/deactivate",{_id:e._id},r);case 5:e.clean(),e.close(),e.getCategorias(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:e.closeDelete();case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},activateItemConfirm:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={Token:e.$store.state.token},r={headers:a},t.next=5,o.a.put("/category/activate",{_id:e._id},r);case 5:e.clean(),e.close(),e.getCategorias(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:e.closeDelete();case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},close:function(){var e=this;this.dialog=!1,this.$refs.form.resetValidation(),this.$nextTick((function(){e.editedIndex=-1}))},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},clean:function(){this._id="",this.nombre="",this.descripcion=""},save:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1!==e.editedIndex){t.next=18;break}if(!e.$refs.form.validate()){t.next=16;break}return t.prev=2,a={Token:e.$store.state.token},r={headers:a},t.next=7,o.a.put("/category/update",{_id:e._id,name:e.nombre,description:e.descripcion},r);case 7:e.clean(),e.close(),e.getCategorias(),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),console.log(t.t0);case 15:e.close();case 16:t.next=33;break;case 18:if(!e.$refs.form.validate()){t.next=33;break}return t.prev=19,n={Token:e.$store.state.token},i={headers:n},t.next=24,o.a.post("/category/add",{name:e.nombre,description:e.descripcion},i);case 24:e.clean(),e.close(),e.getCategorias(),t.next=32;break;case 29:t.prev=29,t.t1=t["catch"](19),console.log(t.t1);case 32:e.close();case 33:case"end":return t.stop()}}),t,null,[[2,12],[19,29]])})))()},getColor:function(e){return 1===e?"green":0===e?"red":"black"}}},l=s,d=a("2877"),u=a("6544"),v=a.n(u),m=a("8336"),f=a("b0af"),p=a("99d9"),g=a("cc20"),h=a("62ad"),b=a("a523"),k=a("8fea"),x=a("169a"),_=a("ce7e"),C=a("4bd4"),w=a("132d"),y=a("0fd9"),I=a("2fa4"),T=a("8654"),D=a("71d9"),V=a("2a7f"),$=Object(d["a"])(l,r,n,!1,null,null,null);t["default"]=$.exports;v()($,{VBtn:m["a"],VCard:f["a"],VCardActions:p["a"],VCardText:p["b"],VCardTitle:p["c"],VChip:g["a"],VCol:h["a"],VContainer:b["a"],VDataTable:k["a"],VDialog:x["a"],VDivider:_["a"],VForm:C["a"],VIcon:w["a"],VRow:y["a"],VSpacer:I["a"],VTextField:T["a"],VToolbar:D["a"],VToolbarTitle:V["a"]})}}]);
//# sourceMappingURL=categories.cde298da.js.map